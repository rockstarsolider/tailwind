<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../output.css" rel="stylesheet">
    <script src="./dashboard.js"></script>
    <title>داشبورد</title>
</head>
<body class="font-[yekan]" dir="rtl">

    <!-- Side Bar -->
    <ul id="sidebar" class="menu bg-base-300 h-screen w-64 md:w-72 fixed hidden">
        <li class="mr-1 font-bold text-xl py-5">داشبورد</li>

        <li class="text-lg"><a href="./"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
            خانه</a></li>
        <li class="text-lg rounded-lg bg-neutral text-white"><a href="./newtask.html"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            تسک جدید</a></li>
        <li class="text-lg"><a href="./prevtasks.html"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
            تسک های قبلی</a></li>
        <li class="text-lg"><a href="./time.html"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            زمان و حضور در جلسات</a></li>
        <li class="text-lg"><a href="./pricing.html"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
            خرید اشتراک</a></li>
        <li class="text-lg"><a href="./teammates.html"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
            هم تیمی ها</a></li>
        <li class="text-lg"><a href="./setting.html"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
            تنظیمات</a></li>
    </ul>

    <div dir="ltr" class="w-full ">
        <!-- Header -->
        <div id="header" dir="ltr" class="h-16 z-20 shadow-md bg-base-100 flex justify-between items-center md:px-12 px-3 w-[100%] fixed">
            <div class="avatar online placeholder">
                <div class="bg-neutral text-neutral-content rounded-full w-12">
                  <span class="text-xl">AI</span>
                </div>
            </div>
            <div class="md:gap-8 gap-4 flex items-center justify-center" dir="rtl">
                <label id="menu" class="btn btn-circle btn-neutral swap swap-rotate ">
                    <input type="checkbox" />
                    <svg class="swap-off fill-current" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512"><path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"/></svg>
                    <svg class="swap-on fill-current" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512"><polygon points="400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49"/></svg>
                </label>
                <p id="name" class="text-lg font-bold"></p>
                <p class="text-lg font-bold">امتیاز: 18</p>
            </div>
        </div>

        <!-- Content -->
        <div dir="rtl" id="content" class="md:px-12 px-3 w-[100%] pt-28 flex md:flex flex-wrap items-start md:justify-start justify-center gap-12 max-w-[85]rem">
            <div class="card w-96 bg-base-100 shadow-xl">
                <figure><img src="/media/course-road/ai1.png" class="w-44 mt-4" alt="Shoes" /></figure>
                <div class="card-body">
                    <h2 class="card-title">تسک جدید</h2>
                    <p class="font-bold" id="title"></p>
                    <p id="desc"></p>
                    <div class="card-actions gap-5">
                        <a id="link" class="btn btn-neutral">لینک منابع</a>
                    </div>
                </div>
            </div>

            <div class="card w-96 bg-base-100 shadow-xl p-6 gap-5">
                <p class="card-title">آپلود کردن تسک:</p>
                <p>شما میتوانید تسک خود را روی گیتهاب یا روی سایت آپلود کنید.</p>
                <input dir="ltr" type="file" class="file-input file-input-bordered w-full max-w-xs" />
            </div>

            <div class="flex flex-col items-center justify-center gap-5 p-10 w-96 shadow-xl rounded-2xl">
                <p class="font-bold text-xl">زمان باقی مانده برای تحویل تسک</p>
                <div dir="ltr" class="grid grid-flow-col gap-5 text-center auto-cols-max">
                    <div class="flex flex-col">
                            <span class="countdown font-mono text-5xl">
                                <span id="days"></span>
                            </span>
                            روز
                        </div> 
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="module">
    import {checkApi,getAccessCookie} from '../api.js'
    checkApi()
    const access = getAccessCookie()
    
    fetch('http://127.0.0.1:8000/course/new_task/', {
            method: 'GET',
            headers: {'Content-Type': 'application/json','Authorization':'JWT '+access},
        })
        .then(response => {
            return response.json();
        })
        .then(data => {
            console.log(data)
            document.getElementById("name").innerText = data[0]
            document.getElementById("title").innerText = data[1].title
            document.getElementById("desc").innerText = data[1].description
            document.getElementById("link").setAttribute('href',data[1].resources_links)
            document.getElementById("days").setAttribute('style','--value:'+data[2]+';')
        })
        .catch(error => {
            console.error('Error:', error);
    });
</script>
</html>